apiVersion: networking.cloud.sap/v1alpha1
kind: Device
metadata:
  labels:
    app.kubernetes.io/name: network-operator
    app.kubernetes.io/managed-by: kustomize
    networking.cloud.sap/role: leaf
    networking.cloud.sap/site: test
    networking.cloud.sap/rack: lab
    networking.cloud.sap/device-serial: abcde1
  name: leaf1
spec:
  endpoint:
    address: 192.168.5.2:9339
    secretRef:
      name: secret-basic-auth
  bootstrap:
    template:
      inline: |
        {
          "image": {
              "version": "10.4(4)",
              "url": "https://repo.eu-de-1.cloud.sap/hw-firmware/cisco/nexus9k/nxos64-cs.10.4.4.F.bin",
              "md5sum": "366ef574de8899b7179e75dc6856492f"
          },
          "config": {
              "lines": [
                  "feature grpc",
                  "grpc port 50051",
                  "no password strength-check",
                  "username seb password 8 $nx-pbkdf2$qLhZSB/e2dZyGU$V1e1xatLlM7qMKb40ZcSMOIU4lMksBX2GLvY6jBGQCU  role network-admin",
                  "username admin password 5 $5$FKAICE$j6flrdKoxirJ.4CCrx/Pl6M6W/zhc0MCkneXH1vFNr9  role network-admin",
                  "vrf context management",
                  "  ip domain-name switch.cloud.sap",
                  "  ip name-server 147.204.9.201",
                  "  ip route 0.0.0.0/0 10.114.235.1",
                  "interface mgmt0",
                  "  vrf member management",
                  "  ip address 192.168.5.2/24"
              ]
          }
        }

---
apiVersion: v1
kind: Secret
metadata:
  labels:
    app.kubernetes.io/name: network-operator
    app.kubernetes.io/managed-by: kustomize
  name: secret-basic-auth
type: kubernetes.io/basic-auth
stringData:
  username: admin
  password: admin
